\documentclass[a4paper,12pt,bahasa]{extarticle}
\usepackage[a4paper]{geometry}
\geometry{verbose,tmargin=2cm,bmargin=2cm,lmargin=2cm,rmargin=2cm}

\usepackage{fontspec}
\setmainfont{Calibri}
\setmonofont{Courier 10 Pitch}

\setlength{\parindent}{0cm}

\usepackage{amsmath}

\usepackage{setspace}
\onehalfspacing

\usepackage{xcolor}
\usepackage{float}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{url}

\usepackage{float}

\usepackage{minted}
%\newminted{verilog}{breaklines}
\newminted{verilog}{breaklines,fontsize=\small}
\newminted{text}{breaklines,fontsize=\small}

\usepackage{babel}

\definecolor{mintedbg}{rgb}{0.95,0.95,0.95}
\usepackage{mdframed}

%\global\mdfapptodefinestyle{verilognotes}{%
%rightline=true,%
%innerleftmargin=10,%
%innerrightmargin=10,%
%frametitlerule=true,%
%frametitlerulewidth=2pt}

\mdfdefinestyle{verilognotes}{%
  linecolor=blue,
  linewidth=1pt,
  frametitlerule=true,
  frametitlerulewidth=2pt
}

%\BeforeBeginEnvironment{minted}{\begin{mdframed}[backgroundcolor=mintedbg]}
%\AfterEndEnvironment{minted}{\end{mdframed}}


\begin{document}


\title{MODUL V \\
Implementasi Rangkaian Digital dengan FPGA}
\author{}
\date{}
\maketitle

\section{Tujuan}

\section{Alat dan Bahan}


\section{Dasar Teori}

programmable logic devices dan FPGA

Entri desain

\input{intro_quartus_skematik}

\input{verilog1}

\section{Praktikum}

\subsection{Pengenalan IO: LED dan push button}

{\color{red} Perlu gambar board FPGA yang akan digunakan}

Beberapa daftar port dari board FPGA yang digunakan:

\input{tabel_pin.tex}

Untuk PIN assignment, buat skematik atau file Verilog terlebih dahulu, kemudian compile.
Buka PIN assignment, set pin yang diperlukan.

Prosedur ini diberikan pada contoh menyalakan LED.

\subsubsection{LED}

Buat proyek baru dengan nama \textbf{led\_light}, misalnya.
Kemudian tambahkan file Verilog berikut
ke project. Kode Verilog ini memberikan nilai logika ke tiap
LED (hardwired, tanpa ada input).


{\setstretch{1.0}
\begin{verilogcode}
module led_light(led);
  output[3:0] led;
  assign led = 4'b0000; // coba ubah-ubah nilai ini untuk tiap LED
endmodule
\end{verilogcode}
}

Compile file ini dengan cara klik icon \textbf{Compile} atau dengan menu
\textbf{Processing -> Start Compilation} atau menggunakan shortcut
\textbf{Ctrl + L}.

Jika tidak ada kesalahan pada saat proses kompilasi,
maka langkah selanjutnya adalah melakukan
PIN assignment, yang dapat dilakukan dengan memilih menu
\textbf{Assignment -> Pin Planner} atau menggunakan shortcut
\textbf{Ctrl + N}. Atur PIN assigment sesuai dengan Tabel \ref{tab:pin}.

\begin{figure}[H]
\centering
\includegraphics[scale=0.5]{images/PinPlanner_4LED.png}
\par
\caption{PIN Assignment untuk 4 LED}
\end{figure}

Compile lagi file tersebut.

Jika tidak ada pesan error, langkah selanjutnya adalah mendownload program
ini ke FPGA. Proses ini dapat dilakukan dengan cara memilih menu
\textbf{Tools -> Programmer}.
Klik button \textbf{Add File} untuk menambahkan file {\tt led\_light.sof}.
File ini biasanya ada di dalam subdirektori {\tt output} dari direktori
proyek.
Pastikan juga hardware telah terdeteksi. Jika belum terdeteksi, tambahkan melalui
dengan mengklik button \textbf{Hardware Setup}.

\begin{figure}[H]
\centering
\includegraphics[scale=0.6]{images/Programmer_4LED.png}
\par
\caption{Tampilan tool \textbf{Programmer}}
\end{figure}

\begin{mdframed}[style=verilognotes,frametitle={Catatan Verilog}]
Misalkan pada board FPGA yang digunakan urutan LED dari kiri ke kanan adalah LED1,
LED2, LED3, dan LED4.

Misalkan memberikan assignment sebagai berikut.
\begin{itemize}
\item LED1 diwakili dengan {\tt led[0]}
\item LED2 diwakili dengan {\tt led[1]}
\item LED3 diwakili dengan {\tt led[2]}
\item LED4 diwakili dengan {\tt led[3]}
\end{itemize}


Misalkan juga kita memberikan nilai logika pada {\tt led} dengan
kode Verilog berikut.
\begin{verilogcode}
  led = 4'b1010;
\end{verilogcode}
Maka nilai 0 (nilai bit paling kanan atau LSB) diberikan pada {\tt led[0]}
atau LED1. Nilai pada bit kedua dari kanan diberikan untuk {\tt led[1]}, bit ketiga
untuk {\tt led[2]}, dan bit keempat (paling kiri atau MSB) untuk {\tt led[3]}.

Bagian {\tt output [3:0] led} pada kode di atas dapat diganti
dengan {\tt output [1:4] led} untuk memudahkan assignment nilai logika
sesuai dengan urutan LED di board yang digunakan. Sehingga kita dapat
melakukan assigment sebagai berikut.
\begin{itemize}
\item LED1 diwakili dengan {\tt led[1]}
\item LED2 diwakili dengan {\tt led[2]}
\item LED3 diwakili dengan {\tt led[3]}
\item LED4 diwakili dengan {\tt led[4]}
\end{itemize}

\end{mdframed}

Cobalah bereksprimen dengan cara mengganti-ganti nilai logika
dari {\tt led}, kemudian isilah tabel berikut.

\begin{table}[H]
\centering
\begin{tabular}{|c|c|}
\hline
Nilai logika & Keadaan LED (on/off) \\
\hline
0 & \\
1 & \\
\hline
\end{tabular}
\par
\end{table}


\subsubsection{Push buttons}

Buat project baru, dan buat file Verilog dengan mendefiniskan satu modul
dengan input dari push button dan output ke LED.
\begin{verilogcode}
module test_buttons( buttons, led );
  input  [3:0] buttons;
  output [3:0] led;

  assign led = buttons;
endmodule
\end{verilogcode}

Bisa juga menggunakan potongan kode berikut.
\begin{verilogcode}
  assign led[0] = buttons[0];
  assign led[1] = buttons[1];
  assign led[2] = buttons[2];
  assign led[3] = buttons[3];
\end{verilogcode}

Cobalah bereksperimen dengan kode Verilog yang ada dan juga menggukan operator Verilog
seperti 

\begin{table}[H]
\centering
\begin{tabular}{|c|c|}
\hline
Nilai logika & Keadaan PB \\
\hline
0 & \\
1 & \\
\hline
\end{tabular}
\par
\end{table}

\subsubsection{Seven segments}

Lihat Modul 1.



\subsection{Rangkaian kombinasional}

Membuat rangkaian logika digital sederhana dengan spesifikasi sebagai berikut.

\begin{itemize}
\item input push button sebanyak 3 buah, misalkan bernama {\tt A}, {\tt B}
dan {\tt C}
\item output berupa satu LED dengan nama {\tt led}
\item LED akan menyala jika jumlah push button
yang ditekan ganjil
\end{itemize}

Misalkan ketika push button ditekan nilai logikanya adalah 0 dan 
LED akan menyala jika nilai logika adalah 0, maka dapat diperoleh tabel
sebagai berikut.

\input{tabel_deteksi_ganjil3}

\begin{equation*}
LED = ABC + \bar{A}\bar{B}C + \bar{A}B\bar{C} + A\bar{B}\bar{C}
\end{equation*}

Kode Verilog yang mengimplementasikan persamaan logika di atas adalah
sebagai berikut.
\begin{verilogcode}
module deteksi_ganjil_3(
  input wire A,
  input wire B,
  input wire C,
  output wire led );

  assign led = (A & B & C) | (~A & ~B & C) | (~A & B & ~C) | (A & ~B & ~C);

endmodule
\end{verilogcode}


\subsection{BCD decoder}


\subsection{Rangkaian kombinasional}

- rangkaian pendeteksi genap ganjil, input 4 PB, output 1 LED

- Input PB -> BCD -> seven segment

- IR -> BCD -> seven segment

- Implementasi XOR

- half adder dan full adder

- Menyalakan satu atau beberapa LED dengan kombinasi input
4 push button yang diberikan.
\begin{itemize}
\item LED1 menyala jika button1 dan button3 ditekan atau button1 dan button 4 ditekan
\item LED2 menyala jika button2 dan button4 ditekan atau button1 ditekan
\end{itemize}

- Input BCD (dari ) ke output seven segment. Buat tabel kebenaran dan rangkaian (dalam skematik
atau Verilog struktural).

{\centering
\begin{tabular}{|c|c|c|c||c|c|c|c|c|c|c|c|}
\hline
\multicolumn{4}{|c||}{Input} & \multicolumn{8}{|c|}{Output} \\
\hline
PB1 & PB2 & PB3 & PB4 & a & b & c & d & e & f & g & dp \\
\hline
0 & 0 & 0 & 0 &  &  &  &  &  &  &  & \\
0 & 0 & 0 & 1 &  &  &  &  &  &  &  & \\
0 & 0 & 1 & 0 &  &  &  &  &  &  &  & \\
... & ... & ... & ... &  &  &  &  &  &  &  & \\
1 & 1 & 1 & 1 &  &  &  &  &  &  &  & \\
\hline
\end{tabular}
\par}


\subsection{Rangkaian sekuensial}

- Implementasi D flip-flop

- Implementasi J-K flip-flop dan

- Implementasi T flip-flip. Toggle operation: buzzer dan LED

- register, counter

- Kalkulator sederhana, input dari remote IR ?

- Rangkaian multiplexing LED

- Menampilkan LED perdigit


\section{Tugas Pendahuluan}


\end{document}
